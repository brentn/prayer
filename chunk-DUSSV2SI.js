import{$a as l,Ea as o,Jb as f,eb as d,fb as s,mb as p}from"./chunk-NBPTNBXQ.js";var c=class a{constructor(e,t){this.el=e;this.rd=t}swipeLeft=new l;startX=0;startY=0;dragging=!1;didSwipe=!1;maxReveal=96;threshold=80;setTransform(e,t=!1){t?this.rd.setStyle(this.el.nativeElement,"transition","transform .2s ease"):this.rd.setStyle(this.el.nativeElement,"transition","none"),this.rd.setStyle(this.el.nativeElement,"transform",`translateX(${e}px)`)}reset(){this.setTransform(0,!0)}flyOutAnd(){return new Promise(e=>{let t=()=>{this.el.nativeElement.removeEventListener("transitionend",t),e()};this.el.nativeElement.addEventListener("transitionend",t),this.rd.setStyle(this.el.nativeElement,"transition","transform .25s ease"),this.rd.setStyle(this.el.nativeElement,"transform","translateX(-120%)")})}onDown(e){this.dragging=!0,this.startX=e.clientX,this.startY=e.clientY,this.didSwipe=!1,this.setTransform(0,!1)}onMove(e){if(!this.dragging)return;let t=e.clientX-this.startX;if(Math.abs(e.clientY-this.startY)>Math.abs(t))return;let r=Math.min(0,Math.max(-this.maxReveal,t));this.setTransform(r,!1)}onUp(e){if(!this.dragging)return;let t=e.clientX-this.startX,i=Math.abs(e.clientY-this.startY);this.dragging=!1,-t>this.threshold&&i<40?(this.didSwipe=!0,e.preventDefault(),e.stopImmediatePropagation(),this.swipeLeft.emit()):this.reset()}onCancel(){this.dragging=!1,this.reset()}onClick(e){this.didSwipe&&(e.preventDefault(),e.stopImmediatePropagation(),this.didSwipe=!1)}static \u0275fac=function(t){return new(t||a)(s(o),s(d))};static \u0275dir=p({type:a,selectors:[["","appSwipeLeft",""]],hostBindings:function(t,i){t&1&&f("pointerdown",function(n){return i.onDown(n)})("pointermove",function(n){return i.onMove(n)})("pointerup",function(n){return i.onUp(n)})("pointercancel",function(){return i.onCancel()})("click",function(n){return i.onClick(n)})},outputs:{swipeLeft:"swipeLeft"},exportAs:["appSwipeLeft"]})};export{c as a};
