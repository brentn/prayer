import{a as j}from"./chunk-6LRFLPLY.js";import{c as k}from"./chunk-RH6FSIFT.js";import{a as Y,c as _}from"./chunk-GPGR7XCH.js";import{e as H,f as A,g as T}from"./chunk-WBJADFSS.js";import"./chunk-2EMJMGML.js";import{n as F}from"./chunk-L2AKKXVK.js";import"./chunk-IJRBTMBO.js";import{B as X,s as I,t as R,w as B}from"./chunk-DIWVQYHB.js";import{e as P,h as O}from"./chunk-LPDJFX7N.js";import{$a as M,Ab as a,Ea as x,Fb as E,Jb as d,Kb as v,Ub as D,Wa as c,Xb as l,Yb as w,d as f,eb as b,fb as h,ka as p,kb as C,mb as L,qa as u,qb as S,ra as g,yb as y,zb as o}from"./chunk-NBPTNBXQ.js";var m=class s{constructor(e,t){this.el=e;this.rd=t}swipeLeft=new M;startX=0;startY=0;dragging=!1;didSwipe=!1;maxReveal=96;threshold=80;setTransform(e,t=!1){t?this.rd.setStyle(this.el.nativeElement,"transition","transform .2s ease"):this.rd.setStyle(this.el.nativeElement,"transition","none"),this.rd.setStyle(this.el.nativeElement,"transform",`translateX(${e}px)`)}reset(){this.setTransform(0,!0)}flyOutAnd(){return new Promise(e=>{let t=()=>{this.el.nativeElement.removeEventListener("transitionend",t),e()};this.el.nativeElement.addEventListener("transitionend",t),this.rd.setStyle(this.el.nativeElement,"transition","transform .25s ease"),this.rd.setStyle(this.el.nativeElement,"transform","translateX(-120%)")})}onDown(e){this.dragging=!0,this.startX=e.clientX,this.startY=e.clientY,this.didSwipe=!1,this.setTransform(0,!1)}onMove(e){if(!this.dragging)return;let t=e.clientX-this.startX;if(Math.abs(e.clientY-this.startY)>Math.abs(t))return;let n=Math.min(0,Math.max(-this.maxReveal,t));this.setTransform(n,!1)}onUp(e){if(!this.dragging)return;let t=e.clientX-this.startX,i=Math.abs(e.clientY-this.startY);this.dragging=!1,-t>this.threshold&&i<40?(this.didSwipe=!0,e.preventDefault(),e.stopImmediatePropagation(),this.swipeLeft.emit()):this.reset()}onCancel(){this.dragging=!1,this.reset()}onClick(e){this.didSwipe&&(e.preventDefault(),e.stopImmediatePropagation(),this.didSwipe=!1)}static \u0275fac=function(t){return new(t||s)(h(x),h(b))};static \u0275dir=L({type:s,selectors:[["","appSwipeLeft",""]],hostBindings:function(t,i){t&1&&d("pointerdown",function(r){return i.onDown(r)})("pointermove",function(r){return i.onMove(r)})("pointerup",function(r){return i.onUp(r)})("pointercancel",function(){return i.onCancel()})("click",function(r){return i.onClick(r)})},outputs:{swipeLeft:"swipeLeft"},exportAs:["appSwipeLeft"]})};function z(s,e){if(s&1){let t=E();o(0,"div",5)(1,"div",6)(2,"mat-icon"),l(3,"delete"),a()(),o(4,"div",7,0),d("swipeLeft",function(){let n=u(t).$implicit,r=D(5),V=v();return g(V.onSwipeLeft(n.id,r))})("click",function(){let n=u(t).$implicit,r=v();return g(r.openList(n.id))}),o(6,"div",8),l(7),a(),o(8,"div",9),l(9),a()()()}if(s&2){let t=e.$implicit;c(7),w(t.name),c(2),w(t.topicIds.length||0)}}var N=class s{store=p(F);dialog=p(B);router=p(k);lists=this.store.selectSignal(j);onAdd(){return f(this,null,function*(){let{AddNameDialogComponent:e}=yield import("./chunk-3CLGDXGM.js");this.dialog.open(e,{data:{title:"New List",label:"List name",placeholder:"e.g., Family"}}).afterClosed().subscribe(i=>{i&&this.store.dispatch(Y({name:i}))})})}onRemove(e){import("./chunk-VKYOXDMO.js").then(t=>{this.dialog.open(t.ConfirmDialogComponent,{data:{title:"Delete list?",message:"Are you sure you want to delete this list?"}}).afterClosed().subscribe(i=>{i&&this.store.dispatch(_({id:e}))})})}onSwipeLeft(e,t){import("./chunk-VKYOXDMO.js").then(i=>{this.dialog.open(i.ConfirmDialogComponent,{data:{title:"Delete list?",message:"Are you sure you want to delete this list?"}}).afterClosed().subscribe(n=>f(this,null,function*(){n?(yield t.flyOutAnd(),this.store.dispatch(_({id:e}))):t.reset()}))})}openList(e){this.router.navigate(["/list",e])}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=C({type:s,selectors:[["ng-component"]],decls:9,vars:1,consts:[["swipe","appSwipeLeft"],[1,"section-title"],[1,"cards"],["class","swipe-wrap",4,"ngFor","ngForOf"],["mat-fab","","color","primary","aria-label","Add List",1,"fab","mat-mdc-extended-fab",3,"click"],[1,"swipe-wrap"],["aria-hidden","true",1,"reveal","delete"],["appSwipeLeft","","role","button","tabindex","0",1,"card",3,"swipeLeft","click"],[1,"card-title"],["title","Topics",1,"badge"]],template:function(t,i){t&1&&(o(0,"section")(1,"h3",1),l(2,"Lists"),a(),o(3,"div",2),S(4,z,10,2,"div",3),a(),o(5,"button",4),d("click",function(){return i.onAdd()}),o(6,"mat-icon"),l(7,"add"),a(),l(8," Add List "),a()()),t&2&&(c(4),y("ngForOf",i.lists()))},dependencies:[O,P,H,T,A,R,I,X,m],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-title[_ngcontent-%COMP%]{margin:0 0 .5rem 2rem;color:var(--md-sys-color-on-surface, #4e342e)}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px}@media (min-width: 600px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 960px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.card[_ngcontent-%COMP%]{border:1px solid rgba(78,52,46,.25);border-radius:12px;padding:12px 14px;display:flex;align-items:center;justify-content:space-between;background:#fff8f0;cursor:pointer;transition:box-shadow .2s ease,transform .05s ease;touch-action:pan-y;position:relative;z-index:1}.swipe-wrap[_ngcontent-%COMP%]{position:relative}.reveal[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;width:96px;display:flex;align-items:center;justify-content:center;border-radius:0 12px 12px 0;pointer-events:none}.reveal.delete[_ngcontent-%COMP%]{color:#d32f2f;background-color:#d32f2f22}.card[_ngcontent-%COMP%]:focus, .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px #3e272333}.card[_ngcontent-%COMP%]:active{transform:scale(.995)}.card-title[_ngcontent-%COMP%]{font-weight:500;color:#3e2723}.badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:999px;background:#6d4c41;color:#fff;font-size:12px;line-height:18px}"]})};export{N as MainComponent};
