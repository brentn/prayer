import{a as H,b as W,c as q,f as G}from"./chunk-IT36F6XC.js";import{a as z}from"./chunk-6LRFLPLY.js";import{a as w,c as y}from"./chunk-RH6FSIFT.js";import"./chunk-GPGR7XCH.js";import{a as A,c as D,d as E,e as N,f as O,g as F}from"./chunk-WBJADFSS.js";import"./chunk-2EMJMGML.js";import{n as j}from"./chunk-L2AKKXVK.js";import"./chunk-IJRBTMBO.js";import{B as $,q as P,s as V,t as B,w as R}from"./chunk-DIWVQYHB.js";import{e as S,h as k}from"./chunk-LPDJFX7N.js";import{Ab as s,Fb as C,Jb as m,Kb as h,Wa as d,Xb as a,Yb as L,Zb as I,d as p,gc as b,ka as l,kb as T,qa as g,qb as v,ra as _,yb as x,zb as n}from"./chunk-NBPTNBXQ.js";var M=q.getSelectors(G),J=M.selectAll,Z=M.selectEntities,tt=M.selectTotal;function U(c,e){if(c&1){let t=C();n(0,"a",5),m("click",function(){let o=g(t).$implicit,r=h();return _(r.openTopic(o.id))}),n(1,"span",6),a(2),s(),n(3,"button",7),m("click",function(){let o=g(t).$implicit,r=h();return _(r.onRemove(o.id))}),n(4,"mat-icon"),a(5,"delete"),s()()()}if(c&2){let t=e.$implicit;d(2),L(t.name)}}var K=class c{store=l(j);dialog=l(R);route=l(w);router=l(y);allTopics=this.store.selectSignal(J);lists=this.store.selectSignal(z);listId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentList=b(()=>this.lists().find(e=>e.id===this.listId));topics=b(()=>{let e=this.currentList();if(!e)return[];let t=new Set(e.topicIds);return this.allTopics().filter(i=>t.has(i.id))});onAdd(){return p(this,null,function*(){let{AddNameDialogComponent:e}=yield import("./chunk-3CLGDXGM.js");this.dialog.open(e,{data:{title:"New Topic",label:"Topic name",placeholder:"e.g., Health"}}).afterClosed().subscribe(i=>p(this,null,function*(){if(!i)return;let o=this.allTopics(),r=o.length?Math.max(...o.map(f=>f.id))+1:1;this.store.dispatch(H({id:r,name:i}));let u=this.currentList();if(u){let f=Array.from(new Set([...u.topicIds||[],r])),{updateList:Q}=yield import("./chunk-YXB7RPQY.js");this.store.dispatch(Q({id:u.id,changes:{topicIds:f}}))}}))})}onRemove(e){return p(this,null,function*(){this.store.dispatch(W({id:e}));let t=this.currentList();if(t){let i=(t.topicIds||[]).filter(r=>r!==e),{updateList:o}=yield import("./chunk-YXB7RPQY.js");this.store.dispatch(o({id:t.id,changes:{topicIds:i}}))}})}back(){this.router.navigate(["/"])}openTopic(e){this.router.navigate(["/topic",e])}static \u0275fac=function(t){return new(t||c)};static \u0275cmp=T({type:c,selectors:[["ng-component"]],decls:13,vars:2,consts:[[1,"section-bar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"section-title"],["mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-fab","","color","primary","aria-label","Add Topic",1,"fab","mat-mdc-extended-fab",3,"click"],["mat-list-item","",3,"click"],["matListItemTitle",""],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"]],template:function(t,i){if(t&1&&(n(0,"section")(1,"div",0)(2,"button",1),m("click",function(){return i.back()}),n(3,"mat-icon"),a(4,"arrow_back"),s()(),n(5,"h3",2),a(6),s()(),n(7,"mat-nav-list"),v(8,U,6,1,"a",3),s(),n(9,"button",4),m("click",function(){return i.onAdd()}),n(10,"mat-icon"),a(11,"add"),s(),a(12," Add Topic "),s()()),t&2){let o;d(6),I(" ",((o=i.currentList())==null?null:o.name)||"Topics"," "),d(2),x("ngForOf",i.topics())}},dependencies:[k,S,N,E,D,A,F,O,B,P,V,$],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-bar[_ngcontent-%COMP%]{display:flex!important;align-items:center;vertical-align:middle;gap:1rem;margin-bottom:8px}.section-title[_ngcontent-%COMP%]{color:var(--md-sys-color-on-surface, #4e342e);margin:0;align-self:center}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}button[_ngcontent-%COMP%]{padding:.4rem .6rem}"]})};export{K as ListComponent};
