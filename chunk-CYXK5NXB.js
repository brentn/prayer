import{a as R,b as V,c as Y,d as q}from"./chunk-DFULLXCG.js";import{o as E,p as U,r as v,s as C}from"./chunk-AGEXT6IF.js";import{Jc as k,a as L,b as K}from"./chunk-BUMAETX2.js";function Q(){return{ids:[],entities:{}}}function W(){function s(u={}){return Object.assign(Q(),u)}return{getInitialState:s}}function X(){function s(u){let a=y=>y.ids,p=y=>y.entities,h=E(a,p,(y,B)=>y.map(A=>B[A])),m=E(a,y=>y.length);return u?{selectIds:E(u,a),selectEntities:E(u,p),selectAll:E(u,h),selectTotal:E(u,m)}:{selectIds:a,selectEntities:p,selectAll:h,selectTotal:m}}return{getSelectors:s}}var r=(function(s){return s[s.EntitiesOnly=0]="EntitiesOnly",s[s.Both=1]="Both",s[s.None=2]="None",s})(r||{});function d(s){return function(a,p){let h={ids:[...p.ids],entities:L({},p.entities)},m=s(a,h);return m===r.Both?Object.assign({},p,h):m===r.EntitiesOnly?K(L({},p),{entities:h.entities}):p}}function O(s,u){let a=u(s);return k()&&a===void 0&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",s,"The `selectId` implementation:",u.toString()),a}function z(s){function u(c,n){let e=O(c,s);return e in n.entities?r.None:(n.ids.push(e),n.entities[e]=c,r.Both)}function a(c,n){let e=!1;for(let t of c)e=u(t,n)!==r.None||e;return e?r.Both:r.None}function p(c,n){return n.ids=[],n.entities={},a(c,n),r.Both}function h(c,n){let e=O(c,s);return e in n.entities?(n.entities[e]=c,r.EntitiesOnly):(n.ids.push(e),n.entities[e]=c,r.Both)}function m(c,n){let e=c.map(t=>h(t,n));switch(!0){case e.some(t=>t===r.Both):return r.Both;case e.some(t=>t===r.EntitiesOnly):return r.EntitiesOnly;default:return r.None}}function y(c,n){return B([c],n)}function B(c,n){let t=(c instanceof Array?c:n.ids.filter(i=>c(n.entities[i]))).filter(i=>i in n.entities).map(i=>delete n.entities[i]).length>0;return t&&(n.ids=n.ids.filter(i=>i in n.entities)),t?r.Both:r.None}function A(c){return Object.assign({},c,{ids:[],entities:{}})}function I(c,n,e){let t=e.entities[n.id],i=Object.assign({},t,n.changes),o=O(i,s),l=o!==n.id;return l&&(c[n.id]=o,delete e.entities[n.id]),e.entities[o]=i,l}function x(c,n){return N([c],n)}function N(c,n){let e={};return c=c.filter(i=>i.id in n.entities),c.length>0?c.filter(o=>I(e,o,n)).length>0?(n.ids=n.ids.map(o=>e[o]||o),r.Both):r.EntitiesOnly:r.None}function S(c,n){let t=n.ids.reduce((i,o)=>{let l=c(n.entities[o]);return l!==n.entities[o]&&i.push({id:o,changes:l}),i},[]).filter(({id:i})=>i in n.entities);return N(t,n)}function F({map:c,id:n},e){let t=e.entities[n];if(!t)return r.None;let i=c(t);return x({id:n,changes:i},e)}function T(c,n){return w([c],n)}function w(c,n){let e=[],t=[];for(let l of c){let f=O(l,s);f in n.entities?t.push({id:f,changes:l}):e.push(l)}let i=N(t,n),o=a(e,n);switch(!0){case(o===r.None&&i===r.None):return r.None;case(o===r.Both||i===r.Both):return r.Both;default:return r.EntitiesOnly}}return{removeAll:A,addOne:d(u),addMany:d(a),setAll:d(p),setOne:d(h),setMany:d(m),updateOne:d(x),updateMany:d(N),upsertOne:d(T),upsertMany:d(w),removeOne:d(y),removeMany:d(B),map:d(S),mapOne:d(F)}}function Z(s,u){let{removeOne:a,removeMany:p,removeAll:h}=z(s);function m(e,t){return y([e],t)}function y(e,t){let i=e.filter(o=>!(O(o,s)in t.entities));return i.length===0?r.None:(n(i,t),r.Both)}function B(e,t){return t.entities={},t.ids=[],y(e,t),r.Both}function A(e,t){let i=O(e,s);return i in t.entities?(t.ids=t.ids.filter(o=>o!==i),n([e],t),r.Both):m(e,t)}function I(e,t){let i=e.map(o=>A(o,t));switch(!0){case i.some(o=>o===r.Both):return r.Both;case i.some(o=>o===r.EntitiesOnly):return r.EntitiesOnly;default:return r.None}}function x(e,t){return S([e],t)}function N(e,t,i){if(!(t.id in i.entities))return!1;let o=i.entities[t.id],l=Object.assign({},o,t.changes),f=O(l,s);return delete i.entities[t.id],e.push(l),f!==t.id}function S(e,t){let i=[],o=e.filter(l=>N(i,l,t)).length>0;if(i.length===0)return r.None;{let l=t.ids,f=[];return t.ids=t.ids.filter((M,b)=>M in t.entities?!0:(f.push(b),!1)),n(i,t),!o&&f.every(M=>t.ids[M]===l[M])?r.EntitiesOnly:r.Both}}function F(e,t){let i=t.ids.reduce((o,l)=>{let f=e(t.entities[l]);return f!==t.entities[l]&&o.push({id:l,changes:f}),o},[]);return S(i,t)}function T({map:e,id:t},i){let o=i.entities[t];if(!o)return r.None;let l=e(o);return x({id:t,changes:l},i)}function w(e,t){return c([e],t)}function c(e,t){let i=[],o=[];for(let M of e){let b=O(M,s);b in t.entities?o.push({id:b,changes:M}):i.push(M)}let l=S(o,t),f=y(i,t);switch(!0){case(f===r.None&&l===r.None):return r.None;case(f===r.Both||l===r.Both):return r.Both;default:return r.EntitiesOnly}}function n(e,t){e.sort(u);let i=[],o=0,l=0;for(;o<e.length&&l<t.ids.length;){let f=e[o],M=O(f,s),b=t.ids[l],J=t.entities[b];u(f,J)<=0?(i.push(M),o++):(i.push(b),l++)}o<e.length?t.ids=i.concat(e.slice(o).map(s)):t.ids=i.concat(t.ids.slice(l)),e.forEach((f,M)=>{t.entities[s(f)]=f})}return{removeOne:a,removeMany:p,removeAll:h,addOne:d(m),updateOne:d(x),upsertOne:d(w),setAll:d(B),setOne:d(A),setMany:d(I),addMany:d(y),updateMany:d(S),upsertMany:d(c),map:d(F),mapOne:d(T)}}function G(s={}){let{selectId:u,sortComparer:a}={selectId:s.selectId??(y=>y.id),sortComparer:s.sortComparer??!1},p=W(),h=X(),m=a?Z(u,a):z(u);return L(L(L({selectId:u,sortComparer:a},p),h),m)}var _="lists",g=G(),$=g.getInitialState();function P(s){let u=s.ids;return u.length?Math.max(...u)+1:1}var D=C($,v(R,(s,{name:u})=>{let a=P(s);return g.addOne({id:a,name:u,topicIds:[]},s)}),v(V,(s,{id:u,changes:a})=>g.updateOne({id:u,changes:a},s)),v(Y,(s,{id:u})=>g.removeOne(u,s)),v(q,s=>g.removeAll(s))),tt=U({name:_,reducer:D}),{name:lt,reducer:dt,selectListsState:H}=tt,{selectAll:at,selectEntities:ft,selectIds:yt,selectTotal:pt}=g.getSelectors();var j=g.getSelectors(H),Ot=j.selectAll,gt=j.selectEntities,bt=j.selectTotal;export{G as a,$ as b,dt as c,Ot as d};
