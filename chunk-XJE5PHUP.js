import{a as K,b as Q,c as U,f as X}from"./chunk-7BHGX54Q.js";import{a as J}from"./chunk-NXKPZVRN.js";import"./chunk-AKY6NCKP.js";import{a as A,b as E,c as N,d as P,e as O}from"./chunk-BPRZGOB6.js";import{c as k,e as w,h as B,i as F,m as H}from"./chunk-EQTONB35.js";import"./chunk-6ICJU5RU.js";import"./chunk-BQHBFRWM.js";import"./chunk-Q6TWIOL2.js";import{n as W}from"./chunk-PRSFUHHW.js";import{c as j,h as G}from"./chunk-FEMVN73J.js";import{a as V,c as $,d as z}from"./chunk-5XC6QZKK.js";import{g as L,h as D}from"./chunk-745RUJWA.js";import{Cb as M,Db as T,Eb as y,Fb as q,Hb as n,Ib as r,Nb as C,Rb as h,Tb as I,_a as l,d,ec as c,fc as p,ic as R,jc as S,ka as m,pb as _,pc as u,qa as b,ra as x}from"./chunk-F5KG7EK2.js";var v=U.getSelectors(X),Y=v.selectAll,st=v.selectEntities,at=v.selectTotal;var et=(s,t)=>t.id;function it(s,t){s&1&&(n(0,"div",3),c(1),r()),s&2&&(l(),p(t.name))}function ot(s,t){if(s&1){let e=C();n(0,"a",4)(1,"span",6),c(2),r(),n(3,"span",7),c(4),R(5,"date"),r(),n(6,"button",8),h("click",function(){let o=b(e).$implicit,a=I();return x(a.onRemove(o.id))}),n(7,"mat-icon"),c(8,"delete"),r()()()}if(s&2){let e=t.$implicit;l(2),p(e.description),l(2),p(S(5,2,e.createdDate,"short"))}}var Z=class s{store=m(W);dialog=m(j);route=m(k);router=m(w);allRequests=this.store.selectSignal(Y);allTopics=this.store.selectSignal(J);allLists=this.store.selectSignal(H);topicId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentTopic=u(()=>this.allTopics().find(t=>t.id===this.topicId));currentList=u(()=>this.allLists().find(t=>(t.topicIds||[]).includes(this.topicId)));requests=u(()=>{let t=this.currentTopic();if(!t)return[];let e=new Set(t.requestIds||[]);return this.allRequests().filter(i=>e.has(i.id))});back(){let t=this.currentList();t?this.router.navigate(["/list",t.id]):this.router.navigate(["/lists"])}onAdd(){return d(this,null,function*(){let{AddNameDialogComponent:t}=yield import("./chunk-LX3S7WRV.js");this.dialog.open(t,{data:{title:"New Request",label:"Description",placeholder:"e.g., Guidance for work"}}).afterClosed().subscribe(i=>d(this,null,function*(){if(!i)return;let o=this.allRequests(),a=o.length?Math.max(...o.map(g=>g.id))+1:1;this.store.dispatch(K({id:a,description:i}));let f=this.currentTopic();if(f){let g=Array.from(new Set([...f.requestIds||[],a])),{updateTopic:tt}=yield import("./chunk-OVHPNYRZ.js");this.store.dispatch(tt({id:f.id,changes:{requestIds:g}}))}}))})}onRemove(t){return d(this,null,function*(){this.store.dispatch(Q({id:t}));let e=this.currentTopic();if(e){let i=(e.requestIds||[]).filter(a=>a!==t),{updateTopic:o}=yield import("./chunk-OVHPNYRZ.js");this.store.dispatch(o({id:e.id,changes:{requestIds:i}}))}})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=_({type:s,selectors:[["ng-component"]],decls:13,vars:2,consts:[[1,"section-bar"],[1,"title-stack"],[1,"section-title"],[1,"section-subtitle"],["mat-list-item",""],["mat-fab","","color","primary","aria-label","Add Request",1,"fab","mat-mdc-extended-fab",3,"click"],["matListItemTitle",""],["matListItemLine",""],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"]],template:function(e,i){if(e&1&&(n(0,"section")(1,"div",0)(2,"div",1)(3,"h3",2),c(4),r(),M(5,it,2,1,"div",3),r()(),n(6,"mat-nav-list"),y(7,ot,9,5,"a",4,et),r(),n(9,"button",5),h("click",function(){return i.onAdd()}),n(10,"mat-icon"),c(11,"add"),r(),c(12," Add Request "),r()()),e&2){let o,a;l(4),p(((o=i.currentTopic())==null?null:o.name)||"Topic"),l(),T((a=i.currentList())?5:-1,a),l(2),q(i.requests())}},dependencies:[D,O,P,N,E,A,F,B,z,V,$,G,L],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-title[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--md-sys-color-on-surface, #4e342e)}.section-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:8px}.title-stack[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#ffffffb3;margin-top:-4px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100;--mdc-extended-fab-container-color: var(--md-sys-color-primary-container);--mdc-fab-container-color: var(--md-sys-color-primary-container);--mdc-extended-fab-label-text-color: var(--md-sys-color-on-primary);--mdc-fab-foreground-color: var(--md-sys-color-on-primary);--mat-fab-foreground-color: var(--md-sys-color-on-primary);background-color:var(--md-sys-color-primary-container)!important;color:var(--md-sys-color-on-primary)!important}"]})};export{Z as TopicComponent};
