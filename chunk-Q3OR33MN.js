import{a as J,b as K,c as Q,f as U}from"./chunk-YOC6EJO3.js";import{a as H}from"./chunk-2DMZMTH6.js";import"./chunk-SITW64QG.js";import{a as R,b as N,c as E,d as y,e as A,f as w,g as O,h as j}from"./chunk-PHEJSUNI.js";import{e as k,g as L,n as G}from"./chunk-V4IMYFYT.js";import{n as $}from"./chunk-ITTDOQMT.js";import{B as F,C as B,F as V,J as z,z as P}from"./chunk-MBHVU5NJ.js";import{e as I,f as S,h as q,i as D}from"./chunk-6TCLGBUS.js";import{$b as T,Ab as n,Fb as M,Jb as p,Kb as x,Wa as a,Xb as r,Yb as m,ac as C,d as b,gc as d,ka as l,kb as h,qa as v,qb as u,ra as _,yb as f,zb as i}from"./chunk-NBPTNBXQ.js";var g=Q.getSelectors(U),W=g.selectAll,ot=g.selectEntities,nt=g.selectTotal;function Z(s,t){if(s&1&&(i(0,"div",7),r(1),n()),s&2){let e=t.ngIf;a(),m(e.name)}}function tt(s,t){if(s&1){let e=M();i(0,"a",8)(1,"span",9),r(2),n(),i(3,"span",10),r(4),T(5,"date"),n(),i(6,"button",11),p("click",function(){let c=v(e).$implicit,Y=x();return _(Y.onRemove(c.id))}),i(7,"mat-icon"),r(8,"delete"),n()()()}if(s&2){let e=t.$implicit;a(2),m(e.description),a(2),m(C(5,2,e.createdDate,"short"))}}var X=class s{store=l($);dialog=l(V);route=l(k);router=l(L);navDir=l(G);allRequests=this.store.selectSignal(W);allTopics=this.store.selectSignal(H);allLists=this.store.selectSignal(j);topicId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentTopic=d(()=>this.allTopics().find(t=>t.id===this.topicId));currentList=d(()=>this.allLists().find(t=>(t.topicIds||[]).includes(this.topicId)));requests=d(()=>{let t=this.currentTopic();if(!t)return[];let e=new Set(t.requestIds||[]);return this.allRequests().filter(o=>e.has(o.id))});back(){this.navDir.setDirection("back");let t=this.currentList();t?this.router.navigate(["/list",t.id]):this.router.navigate(["/lists"])}onAdd(){return b(this,null,function*(){let{AddNameDialogComponent:t}=yield import("./chunk-LYNDD7Q3.js");this.dialog.open(t,{data:{title:"New Request",label:"Description",placeholder:"e.g., Guidance for work"}}).afterClosed().subscribe(o=>{o&&this.store.dispatch(J({description:o}))})})}onRemove(t){this.store.dispatch(K({id:t}))}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=h({type:s,selectors:[["ng-component"]],decls:15,vars:3,consts:[[1,"section-bar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"title-stack"],[1,"section-title"],["class","section-subtitle",4,"ngIf"],["mat-list-item","",4,"ngFor","ngForOf"],["mat-fab","","color","primary","aria-label","Add Request",1,"fab","mat-mdc-extended-fab",3,"click"],[1,"section-subtitle"],["mat-list-item",""],["matListItemTitle",""],["matListItemLine",""],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"]],template:function(e,o){if(e&1&&(i(0,"section")(1,"div",0)(2,"button",1),p("click",function(){return o.back()}),i(3,"mat-icon"),r(4,"arrow_back"),n()(),i(5,"div",2)(6,"h3",3),r(7),n(),u(8,Z,2,1,"div",4),n()(),i(9,"mat-nav-list"),u(10,tt,9,5,"a",5),n(),i(11,"button",6),p("click",function(){return o.onAdd()}),i(12,"mat-icon"),r(13,"add"),n(),r(14," Add Request "),n()()),e&2){let c;a(7),m(((c=o.currentTopic())==null?null:c.name)||"Topic"),a(),f("ngIf",o.currentList()),a(2),f("ngForOf",o.requests())}},dependencies:[D,I,S,A,y,E,N,R,O,w,B,P,F,z,q],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-title[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--md-sys-color-on-surface, #4e342e)}.section-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.title-stack[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#3e2723b3;margin-top:-4px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}"]})};export{X as TopicComponent};
