import{a as B}from"./chunk-DUSSV2SI.js";import{a as H}from"./chunk-A4O7HUEJ.js";import{a as $,b as z}from"./chunk-6EWXWVCX.js";import{e as k,f as I,g as D,h as j}from"./chunk-BVXUFB44.js";import{e as T,g as P}from"./chunk-7773B2KH.js";import{n as R}from"./chunk-ITTDOQMT.js";import"./chunk-TEUDUNE2.js";import{B as V,q as A,s as N,t as E,w as F}from"./chunk-CYCT6KCH.js";import{e as O,i as S}from"./chunk-6TCLGBUS.js";import{Ab as a,Fb as C,Jb as f,Kb as h,Ub as M,Wa as m,Xb as s,Yb as L,Zb as y,d as l,gc as b,ka as d,kb as v,qa as g,qb as w,ra as _,yb as x,zb as o}from"./chunk-NBPTNBXQ.js";function G(c,e){if(c&1){let t=C();o(0,"div",7)(1,"div",8)(2,"mat-icon"),s(3,"delete"),a()(),o(4,"div",9,0),f("swipeLeft",function(){let n=g(t).$implicit,r=M(5),p=h();return _(p.onSwipeLeft(n.id,r))})("click",function(){let n=g(t).$implicit,r=h();return _(r.openTopic(n.id))}),o(6,"div",10),s(7),a()()()}if(c&2){let t=e.$implicit;m(7),L(t.name)}}var W=class c{store=d(R);dialog=d(F);route=d(T);router=d(P);allTopics=this.store.selectSignal(H);lists=this.store.selectSignal(j);listId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentList=b(()=>this.lists().find(e=>e.id===this.listId));topics=b(()=>{let e=this.currentList();if(!e)return[];let t=new Set(e.topicIds);return this.allTopics().filter(i=>t.has(i.id))});onAdd(){return l(this,null,function*(){let{AddNameDialogComponent:e}=yield import("./chunk-Y5TNKTH6.js");this.dialog.open(e,{data:{title:"New Topic",label:"Topic name",placeholder:"e.g., Health"}}).afterClosed().subscribe(i=>l(this,null,function*(){if(!i)return;let n=this.allTopics(),r=n.length?Math.max(...n.map(u=>u.id))+1:1;this.store.dispatch($({id:r,name:i}));let p=this.currentList();if(p){let u=Array.from(new Set([...p.topicIds||[],r])),{updateList:q}=yield import("./chunk-22Q4FVZZ.js");this.store.dispatch(q({id:p.id,changes:{topicIds:u}}))}}))})}onRemove(e){return l(this,null,function*(){this.store.dispatch(z({id:e}));let t=this.currentList();if(t){let i=(t.topicIds||[]).filter(r=>r!==e),{updateList:n}=yield import("./chunk-22Q4FVZZ.js");this.store.dispatch(n({id:t.id,changes:{topicIds:i}}))}})}back(){this.router.navigate(["/"])}openTopic(e){this.router.navigate(["/topic",e])}onSwipeLeft(e,t){import("./chunk-C6RSTMNG.js").then(i=>{this.dialog.open(i.ConfirmDialogComponent,{data:{title:"Delete topic?",message:"Are you sure you want to delete this topic?"}}).afterClosed().subscribe(n=>l(this,null,function*(){n?(yield t.flyOutAnd(),yield this.onRemove(e)):t.reset()}))})}static \u0275fac=function(t){return new(t||c)};static \u0275cmp=v({type:c,selectors:[["ng-component"]],decls:13,vars:2,consts:[["swipe","appSwipeLeft"],[1,"section-bar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"section-title"],[1,"cards"],["class","swipe-wrap",4,"ngFor","ngForOf"],["mat-fab","","color","primary","aria-label","Add Topic",1,"fab","mat-mdc-extended-fab",3,"click"],[1,"swipe-wrap"],["aria-hidden","true",1,"reveal","delete"],["appSwipeLeft","","role","button","tabindex","0",1,"card",3,"swipeLeft","click"],[1,"card-title"]],template:function(t,i){if(t&1&&(o(0,"section")(1,"div",1)(2,"button",2),f("click",function(){return i.back()}),o(3,"mat-icon"),s(4,"arrow_back"),a()(),o(5,"h3",3),s(6),a()(),o(7,"div",4),w(8,G,8,1,"div",5),a(),o(9,"button",6),f("click",function(){return i.onAdd()}),o(10,"mat-icon"),s(11,"add"),a(),s(12," Add Topic "),a()()),t&2){let n;m(6),y(" ",((n=i.currentList())==null?null:n.name)||"Topics"," "),m(2),x("ngForOf",i.topics())}},dependencies:[S,O,k,D,I,E,A,N,V,B],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-bar[_ngcontent-%COMP%]{display:flex!important;align-items:center;vertical-align:middle;gap:1rem;margin-bottom:8px}.section-title[_ngcontent-%COMP%]{color:var(--md-sys-color-on-surface, #4e342e);margin:0;align-self:center}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}button[_ngcontent-%COMP%]{padding:.4rem .6rem}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px}@media (min-width: 600px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 960px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.card[_ngcontent-%COMP%]{border:1px solid rgba(78,52,46,.25);border-radius:12px;padding:12px 14px;display:flex;align-items:center;justify-content:space-between;background:#fff8f0;cursor:pointer;transition:box-shadow .2s ease,transform .05s ease;touch-action:pan-y;position:relative;z-index:1}.card[_ngcontent-%COMP%]:focus, .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px #3e272333}.card[_ngcontent-%COMP%]:active{transform:scale(.995)}.card-title[_ngcontent-%COMP%]{font-weight:500;color:#3e2723}.swipe-wrap[_ngcontent-%COMP%]{position:relative}.reveal[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 auto;width:96px;display:flex;align-items:center;justify-content:center;border-radius:0 12px 12px 0;pointer-events:none}.reveal.delete[_ngcontent-%COMP%]{background:#d32f2f;color:#fff}"]})};export{W as ListComponent};
