import{a as H,b as J,c as K,f as Q}from"./chunk-U5HMIG45.js";import{a as G}from"./chunk-A4O7HUEJ.js";import"./chunk-6EWXWVCX.js";import{a as D,b as E,c as y,d as A,e as N,f as w,g as O,h as j}from"./chunk-BVXUFB44.js";import{e as L,g as R}from"./chunk-7773B2KH.js";import{n as $}from"./chunk-ITTDOQMT.js";import"./chunk-TEUDUNE2.js";import{B as z,q as P,s as F,t as B,w as V}from"./chunk-CYCT6KCH.js";import{e as I,f as q,h as S,i as k}from"./chunk-6TCLGBUS.js";import{$b as T,Ab as n,Fb as h,Jb as p,Kb as x,Wa as a,Xb as s,Yb as m,ac as C,d as b,gc as d,ka as c,kb as M,qa as _,qb as u,ra as v,yb as f,zb as i}from"./chunk-NBPTNBXQ.js";var g=K.getSelectors(Q),U=g.selectAll,it=g.selectEntities,ot=g.selectTotal;function Y(r,t){if(r&1&&(i(0,"div",7),s(1),n()),r&2){let e=t.ngIf;a(),m(e.name)}}function Z(r,t){if(r&1){let e=h();i(0,"a",8)(1,"span",9),s(2),n(),i(3,"span",10),s(4),T(5,"date"),n(),i(6,"button",11),p("click",function(){let l=_(e).$implicit,X=x();return v(X.onRemove(l.id))}),i(7,"mat-icon"),s(8,"delete"),n()()()}if(r&2){let e=t.$implicit;a(2),m(e.description),a(2),m(C(5,2,e.createdDate,"short"))}}var W=class r{store=c($);dialog=c(V);route=c(L);router=c(R);allRequests=this.store.selectSignal(U);allTopics=this.store.selectSignal(G);allLists=this.store.selectSignal(j);topicId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentTopic=d(()=>this.allTopics().find(t=>t.id===this.topicId));currentList=d(()=>this.allLists().find(t=>(t.topicIds||[]).includes(this.topicId)));requests=d(()=>{let t=this.currentTopic();if(!t)return[];let e=new Set(t.requestIds||[]);return this.allRequests().filter(o=>e.has(o.id))});back(){let t=this.currentList();t?this.router.navigate(["/list",t.id]):this.router.navigate(["/lists"])}onAdd(){return b(this,null,function*(){let{AddNameDialogComponent:t}=yield import("./chunk-Y5TNKTH6.js");this.dialog.open(t,{data:{title:"New Request",label:"Description",placeholder:"e.g., Guidance for work"}}).afterClosed().subscribe(o=>{o&&this.store.dispatch(H({description:o}))})})}onRemove(t){this.store.dispatch(J({id:t}))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["ng-component"]],decls:15,vars:3,consts:[[1,"section-bar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"title-stack"],[1,"section-title"],["class","section-subtitle",4,"ngIf"],["mat-list-item","",4,"ngFor","ngForOf"],["mat-fab","","color","primary","aria-label","Add Request",1,"fab","mat-mdc-extended-fab",3,"click"],[1,"section-subtitle"],["mat-list-item",""],["matListItemTitle",""],["matListItemLine",""],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"]],template:function(e,o){if(e&1&&(i(0,"section")(1,"div",0)(2,"button",1),p("click",function(){return o.back()}),i(3,"mat-icon"),s(4,"arrow_back"),n()(),i(5,"div",2)(6,"h3",3),s(7),n(),u(8,Y,2,1,"div",4),n()(),i(9,"mat-nav-list"),u(10,Z,9,5,"a",5),n(),i(11,"button",6),p("click",function(){return o.onAdd()}),i(12,"mat-icon"),s(13,"add"),n(),s(14," Add Request "),n()()),e&2){let l;a(7),m(((l=o.currentTopic())==null?null:l.name)||"Topic"),a(),f("ngIf",o.currentList()),a(2),f("ngForOf",o.requests())}},dependencies:[k,I,q,N,A,y,E,D,O,w,B,P,F,z,S],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-title[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--md-sys-color-on-surface, #4e342e)}.section-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.title-stack[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#3e2723b3;margin-top:-4px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}"]})};export{W as TopicComponent};
