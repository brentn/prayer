import{a as J,b as K,c as Q,f as U}from"./chunk-Y4MHBJQR.js";import{a as H}from"./chunk-A7ICMU5V.js";import"./chunk-M6BDSFP6.js";import{a as E,b as A,c as w,d as y,e as N,f as G}from"./chunk-UHVIWHQP.js";import{c as R,e as D,g as P,h as O}from"./chunk-PBMR7L5W.js";import{n as j}from"./chunk-LH2BSXTQ.js";import{l as $,p as z}from"./chunk-WS2HLQDI.js";import{O as B,Q as F,R as V,f as k,g as L}from"./chunk-CNTVXNUR.js";import{Bb as i,Cb as n,Hb as C,Lb as d,Mb as q,Wa as a,Zb as s,_b as m,bc as I,cc as S,d as _,ic as u,ka as c,kb as v,qa as g,ra as b,wb as M,xb as h,yb as x,zb as T}from"./chunk-4BERGEO3.js";var f=Q.getSelectors(U),W=f.selectAll,ot=f.selectEntities,nt=f.selectTotal;var Y=(r,t)=>t.id;function Z(r,t){r&1&&(i(0,"div",4),s(1),n()),r&2&&(a(),m(t.name))}function tt(r,t){if(r&1){let e=C();i(0,"a",5)(1,"span",7),s(2),n(),i(3,"span",8),s(4),I(5,"date"),n(),i(6,"button",9),d("click",function(){let l=g(e).$implicit,p=q();return b(p.onRemove(l.id))}),i(7,"mat-icon"),s(8,"delete"),n()()()}if(r&2){let e=t.$implicit;a(2),m(e.description),a(2),m(S(5,2,e.createdDate,"short"))}}var X=class r{store=c(j);dialog=c($);route=c(R);router=c(D);allRequests=this.store.selectSignal(W);allTopics=this.store.selectSignal(H);allLists=this.store.selectSignal(G);topicId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentTopic=u(()=>this.allTopics().find(t=>t.id===this.topicId));currentList=u(()=>this.allLists().find(t=>(t.topicIds||[]).includes(this.topicId)));requests=u(()=>{let t=this.currentTopic();if(!t)return[];let e=new Set(t.requestIds||[]);return this.allRequests().filter(o=>e.has(o.id))});back(){let t=this.currentList();t?this.router.navigate(["/list",t.id]):this.router.navigate(["/lists"])}onAdd(){return _(this,null,function*(){let{AddNameDialogComponent:t}=yield import("./chunk-RHERJWZW.js");this.dialog.open(t,{data:{title:"New Request",label:"Description",placeholder:"e.g., Guidance for work"}}).afterClosed().subscribe(o=>{o&&this.store.dispatch(J({description:o}))})})}onRemove(t){this.store.dispatch(K({id:t}))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["ng-component"]],decls:16,vars:2,consts:[[1,"section-bar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"title-stack"],[1,"section-title"],[1,"section-subtitle"],["mat-list-item",""],["mat-fab","","color","primary","aria-label","Add Request",1,"fab","mat-mdc-extended-fab",3,"click"],["matListItemTitle",""],["matListItemLine",""],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"]],template:function(e,o){if(e&1&&(i(0,"section")(1,"div",0)(2,"button",1),d("click",function(){return o.back()}),i(3,"mat-icon"),s(4,"arrow_back"),n()(),i(5,"div",2)(6,"h3",3),s(7),n(),M(8,Z,2,1,"div",4),n()(),i(9,"mat-nav-list"),x(10,tt,9,5,"a",5,Y),n(),i(12,"button",6),d("click",function(){return o.onAdd()}),i(13,"mat-icon"),s(14,"add"),n(),s(15," Add Request "),n()()),e&2){let l,p;a(7),m(((l=o.currentTopic())==null?null:l.name)||"Topic"),a(),h((p=o.currentList())?8:-1,p),a(2),T(o.requests())}},dependencies:[L,N,y,w,A,E,O,P,V,B,F,z,k],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-title[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--md-sys-color-on-surface, #4e342e)}.section-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.title-stack[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#ffffffb3;margin-top:-4px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}"]})};export{X as TopicComponent};
