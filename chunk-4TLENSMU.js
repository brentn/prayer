import{a as V}from"./chunk-DKWAZLQI.js";import{a as $}from"./chunk-A4O7HUEJ.js";import{a as j,b as z}from"./chunk-6EWXWVCX.js";import{e as D,f as I,g as S,h as R}from"./chunk-VIJN57WR.js";import{e as y,g as O}from"./chunk-7773B2KH.js";import{n as B}from"./chunk-ITTDOQMT.js";import{B as N,C as A,F as E,J as F,z as P}from"./chunk-MBHVU5NJ.js";import{e as k,i as L}from"./chunk-6TCLGBUS.js";import{Ab as r,Fb as M,Jb as m,Kb as C,Wa as p,Xb as c,Yb as w,Zb as T,d,gc as g,ka as s,kb as _,qa as h,qb as v,ra as b,yb as x,zb as o}from"./chunk-NBPTNBXQ.js";function q(l,t){if(l&1){let e=M();o(0,"div",7),m("click",function(){let n=h(e).$implicit,a=C();return b(a.openTopic(n.id))}),o(1,"div",8),c(2),r()()}if(l&2){let e=t.$implicit;p(2),w(e.name)}}var H=class l{store=s(B);dialog=s(E);route=s(y);router=s(O);navDir=s(V);allTopics=this.store.selectSignal($);lists=this.store.selectSignal(R);listId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentList=g(()=>this.lists().find(t=>t.id===this.listId));topics=g(()=>{let t=this.currentList();if(!t)return[];let e=new Set(t.topicIds);return this.allTopics().filter(i=>e.has(i.id))});onAdd(){return d(this,null,function*(){let{AddNameDialogComponent:t}=yield import("./chunk-LYNDD7Q3.js");this.dialog.open(t,{data:{title:"New Topic",label:"Topic name",placeholder:"e.g., Health"}}).afterClosed().subscribe(i=>d(this,null,function*(){if(!i)return;let n=this.allTopics(),a=n.length?Math.max(...n.map(f=>f.id))+1:1;this.store.dispatch(j({id:a,name:i}));let u=this.currentList();if(u){let f=Array.from(new Set([...u.topicIds||[],a])),{updateList:W}=yield import("./chunk-22Q4FVZZ.js");this.store.dispatch(W({id:u.id,changes:{topicIds:f}}))}}))})}onRemove(t){return d(this,null,function*(){this.store.dispatch(z({id:t}));let e=this.currentList();if(e){let i=(e.topicIds||[]).filter(a=>a!==t),{updateList:n}=yield import("./chunk-22Q4FVZZ.js");this.store.dispatch(n({id:e.id,changes:{topicIds:i}}))}})}back(){this.navDir.setDirection("back"),this.router.navigate(["/"])}openTopic(t){this.navDir.setDirection("forward"),this.router.navigate(["/topic",t])}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=_({type:l,selectors:[["ng-component"]],decls:13,vars:2,consts:[[2,"background-color","red"],[1,"section-bar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"section-title"],[1,"cards"],["class","card","role","button","tabindex","0",3,"click",4,"ngFor","ngForOf"],["mat-fab","","color","primary","aria-label","Add Topic",1,"fab","mat-mdc-extended-fab",3,"click"],["role","button","tabindex","0",1,"card",3,"click"],[1,"card-title"]],template:function(e,i){if(e&1&&(o(0,"section",0)(1,"div",1)(2,"button",2),m("click",function(){return i.back()}),o(3,"mat-icon"),c(4,"arrow_back"),r()(),o(5,"h3",3),c(6),r()(),o(7,"div",4),v(8,q,3,1,"div",5),r(),o(9,"button",6),m("click",function(){return i.onAdd()}),o(10,"mat-icon"),c(11,"add"),r(),c(12," Add Topic "),r()()),e&2){let n;p(6),T(" ",((n=i.currentList())==null?null:n.name)||"Topics"," "),p(2),x("ngForOf",i.topics())}},dependencies:[L,k,D,S,I,A,P,N,F],styles:["section[_ngcontent-%COMP%]{position:relative;min-height:60vh}.section-bar[_ngcontent-%COMP%]{display:flex!important;align-items:center;vertical-align:middle;gap:1rem;margin-bottom:8px}.section-title[_ngcontent-%COMP%]{color:var(--md-sys-color-on-surface, #4e342e);margin:0;align-self:center}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}button[_ngcontent-%COMP%]{padding:.4rem .6rem}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px}@media (min-width: 600px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 960px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.card[_ngcontent-%COMP%]{border:1px solid rgba(78,52,46,.25);border-radius:12px;padding:12px 14px;display:flex;align-items:center;justify-content:space-between;background:#fff8f0;cursor:pointer;transition:box-shadow .2s ease,transform .05s ease;touch-action:pan-y;position:relative;z-index:1}.card[_ngcontent-%COMP%]:focus, .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px #3e272333}.card[_ngcontent-%COMP%]:active{transform:scale(.995)}.card-title[_ngcontent-%COMP%]{font-weight:500;color:#3e2723}"]})};export{H as ListComponent};
