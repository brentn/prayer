import{a as $}from"./chunk-A7ICMU5V.js";import{a as R,b as V}from"./chunk-M6BDSFP6.js";import{e as P,f as F}from"./chunk-UHVIWHQP.js";import{c as L,e as I,g as O,h as S}from"./chunk-PBMR7L5W.js";import{n as E}from"./chunk-LH2BSXTQ.js";import{l as D,p as N}from"./chunk-WS2HLQDI.js";import{Q as k,R as A,g as w}from"./chunk-CNTVXNUR.js";import{$b as T,Bb as n,Cb as s,Hb as M,Lb as g,Mb as C,Wa as l,Zb as d,_b as y,d as p,ic as f,ka as c,kb as x,qa as h,ra as b,yb as _,zb as v}from"./chunk-4BERGEO3.js";var B=(r,t)=>t.id;function H(r,t){if(r&1){let e=M();n(0,"div",5),g("click",function(){let o=h(e).$implicit,a=C();return b(a.openTopic(o.id))}),n(1,"div",6),d(2),s()()}if(r&2){let e=t.$implicit;l(2),y(e.name)}}var j=class r{store=c(E);dialog=c(D);route=c(L);router=c(I);allTopics=this.store.selectSignal($);lists=this.store.selectSignal(F);listId=Number(this.route.snapshot.paramMap.get("id"))||void 0;currentList=f(()=>this.lists().find(t=>t.id===this.listId));topics=f(()=>{let t=this.currentList();if(!t)return[];let e=new Set(t.topicIds);return this.allTopics().filter(i=>e.has(i.id))});onAdd(){return p(this,null,function*(){let{AddNameDialogComponent:t}=yield import("./chunk-RHERJWZW.js");this.dialog.open(t,{data:{title:"New Topic",label:"Topic name",placeholder:"e.g., Health"}}).afterClosed().subscribe(i=>p(this,null,function*(){if(!i)return;let o=this.allTopics(),a=o.length?Math.max(...o.map(u=>u.id))+1:1;this.store.dispatch(R({id:a,name:i}));let m=this.currentList();if(m){let u=Array.from(new Set([...m.topicIds||[],a])),{updateList:z}=yield import("./chunk-F4QOFY3Y.js");this.store.dispatch(z({id:m.id,changes:{topicIds:u}}))}}))})}onRemove(t){return p(this,null,function*(){this.store.dispatch(V({id:t}));let e=this.currentList();if(e){let i=(e.topicIds||[]).filter(a=>a!==t),{updateList:o}=yield import("./chunk-F4QOFY3Y.js");this.store.dispatch(o({id:e.id,changes:{topicIds:i}}))}})}back(){this.router.navigate(["/"])}openTopic(t){this.router.navigate(["/topic",t])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=x({type:r,selectors:[["ng-component"]],decls:11,vars:1,consts:[[1,"section-bar"],[1,"section-title"],[1,"cards"],["role","button","tabindex","0",1,"card"],["mat-fab","","color","primary","aria-label","Add Topic",1,"fab","mat-mdc-extended-fab",3,"click"],["role","button","tabindex","0",1,"card",3,"click"],[1,"card-title"]],template:function(e,i){if(e&1&&(n(0,"section")(1,"div",0)(2,"h3",1),d(3),s()(),n(4,"div",2),_(5,H,3,1,"div",3,B),s(),n(7,"button",4),g("click",function(){return i.onAdd()}),n(8,"mat-icon"),d(9,"add"),s(),d(10," Add Topic "),s()()),e&2){let o;l(3),T(" ",((o=i.currentList())==null?null:o.name)||"Topics"," "),l(2),v(i.topics())}},dependencies:[w,P,S,O,A,k,N],styles:["section[_ngcontent-%COMP%]{position:relative;height:calc(100vh - 5rem);margin:1rem;border:1px solid rgba(255,255,255,.2);border-radius:12px}.section-bar[_ngcontent-%COMP%]{display:flex!important;align-items:center;vertical-align:middle;gap:1rem;margin-bottom:8px}.section-title[_ngcontent-%COMP%]{color:var(--md-sys-color-on-primary);background-color:var(--md-sys-color-primary);margin:0;text-align:center;flex-grow:1;padding:.5rem .75rem;border:1px solid rgba(255,255,255,.2);border-radius:12px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:100}button[_ngcontent-%COMP%]{padding:.4rem .6rem}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px}@media (min-width: 600px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 960px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.card[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:12px 14px;display:flex;align-items:center;justify-content:space-between;background:var(--md-sys-color-primary);cursor:pointer;transition:box-shadow .2s ease,transform .05s ease;touch-action:pan-y;position:relative;z-index:1}.card[_ngcontent-%COMP%]:focus, .card[_ngcontent-%COMP%]:hover{box-shadow:0 1px 4px #3e272333}.card[_ngcontent-%COMP%]:active{transform:scale(.995)}.card-title[_ngcontent-%COMP%]{font-weight:500;color:var(--md-sys-color-on-primary)}"]})};export{j as ListComponent};
