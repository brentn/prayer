<div class="card-content">
    <mat-icon class="card-icon">{{ icon }}</mat-icon>
    @if (topicName) {
        <div class="card-topic">{{topicName}}:</div>
    }
    <div class="card-title">
        @if (!editingTitle) {
            <span class="title-text" [class.clickable]="!isTopic"
                (click)="!isTopic && startEditTitle()">{{ title }}</span>
        } @else {
            <textarea class="title-input" [(ngModel)]="editingTitleValue" (blur)="saveTitleEdit()"
                (keydown.ctrl.enter)="saveTitleEdit()" (keydown.escape)="cancelTitleEdit()" #titleInput rows="4"
                placeholder="Edit prayer request..."></textarea>
        }
    </div>
    @if (!(isAnswered || localIsAnswered) && !showAnswerForm && !isTopic) {
        <div class="button-row">
            <button mat-button class="archive-button" (click)="archive.emit()" title="Archive Request">
                archive
            </button>
            <button mat-button class="answer-button" (click)="onAnsweredClick?.()" title="Mark as Answered">
                mark as answered
            </button>
        </div>
    }
    @if ((isAnswered || localIsAnswered) && (answerDescription || localAnswerDescription)) {
        <div class="answer-description-box" [@answerFadeIn]>
            {{ answerDescription || localAnswerDescription }}
        </div>
    }
</div>