import{a as R,b as V,c as W,d as Y,e as q}from"./chunk-3QGR3AWG.js";import{o as E,p as U,r as x,s as C}from"./chunk-ZW4QPKHP.js";import{Hc as k,a as S,b as K}from"./chunk-7JFBNO26.js";function Q(){return{ids:[],entities:{}}}function X(){function r(u={}){return Object.assign(Q(),u)}return{getInitialState:r}}function Z(){function r(u){let l=p=>p.ids,y=p=>p.entities,h=E(l,y,(p,A)=>p.map(B=>A[B])),m=E(l,p=>p.length);return u?{selectIds:E(u,l),selectEntities:E(u,y),selectAll:E(u,h),selectTotal:E(u,m)}:{selectIds:l,selectEntities:y,selectAll:h,selectTotal:m}}return{getSelectors:r}}var s=(function(r){return r[r.EntitiesOnly=0]="EntitiesOnly",r[r.Both=1]="Both",r[r.None=2]="None",r})(s||{});function a(r){return function(l,y){let h={ids:[...y.ids],entities:S({},y.entities)},m=r(l,h);return m===s.Both?Object.assign({},y,h):m===s.EntitiesOnly?K(S({},y),{entities:h.entities}):y}}function O(r,u){let l=u(r);return k()&&l===void 0&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",r,"The `selectId` implementation:",u.toString()),l}function z(r){function u(c,n){let e=O(c,r);return e in n.entities?s.None:(n.ids.push(e),n.entities[e]=c,s.Both)}function l(c,n){let e=!1;for(let t of c)e=u(t,n)!==s.None||e;return e?s.Both:s.None}function y(c,n){return n.ids=[],n.entities={},l(c,n),s.Both}function h(c,n){let e=O(c,r);return e in n.entities?(n.entities[e]=c,s.EntitiesOnly):(n.ids.push(e),n.entities[e]=c,s.Both)}function m(c,n){let e=c.map(t=>h(t,n));switch(!0){case e.some(t=>t===s.Both):return s.Both;case e.some(t=>t===s.EntitiesOnly):return s.EntitiesOnly;default:return s.None}}function p(c,n){return A([c],n)}function A(c,n){let t=(c instanceof Array?c:n.ids.filter(i=>c(n.entities[i]))).filter(i=>i in n.entities).map(i=>delete n.entities[i]).length>0;return t&&(n.ids=n.ids.filter(i=>i in n.entities)),t?s.Both:s.None}function B(c){return Object.assign({},c,{ids:[],entities:{}})}function w(c,n,e){let t=e.entities[n.id],i=Object.assign({},t,n.changes),o=O(i,r),d=o!==n.id;return d&&(c[n.id]=o,delete e.entities[n.id]),e.entities[o]=i,d}function v(c,n){return L([c],n)}function L(c,n){let e={};return c=c.filter(i=>i.id in n.entities),c.length>0?c.filter(o=>w(e,o,n)).length>0?(n.ids=n.ids.map(o=>e[o]||o),s.Both):s.EntitiesOnly:s.None}function N(c,n){let t=n.ids.reduce((i,o)=>{let d=c(n.entities[o]);return d!==n.entities[o]&&i.push({id:o,changes:d}),i},[]).filter(({id:i})=>i in n.entities);return L(t,n)}function F({map:c,id:n},e){let t=e.entities[n];if(!t)return s.None;let i=c(t);return v({id:n,changes:i},e)}function T(c,n){return I([c],n)}function I(c,n){let e=[],t=[];for(let d of c){let f=O(d,r);f in n.entities?t.push({id:f,changes:d}):e.push(d)}let i=L(t,n),o=l(e,n);switch(!0){case(o===s.None&&i===s.None):return s.None;case(o===s.Both||i===s.Both):return s.Both;default:return s.EntitiesOnly}}return{removeAll:B,addOne:a(u),addMany:a(l),setAll:a(y),setOne:a(h),setMany:a(m),updateOne:a(v),updateMany:a(L),upsertOne:a(T),upsertMany:a(I),removeOne:a(p),removeMany:a(A),map:a(N),mapOne:a(F)}}function _(r,u){let{removeOne:l,removeMany:y,removeAll:h}=z(r);function m(e,t){return p([e],t)}function p(e,t){let i=e.filter(o=>!(O(o,r)in t.entities));return i.length===0?s.None:(n(i,t),s.Both)}function A(e,t){return t.entities={},t.ids=[],p(e,t),s.Both}function B(e,t){let i=O(e,r);return i in t.entities?(t.ids=t.ids.filter(o=>o!==i),n([e],t),s.Both):m(e,t)}function w(e,t){let i=e.map(o=>B(o,t));switch(!0){case i.some(o=>o===s.Both):return s.Both;case i.some(o=>o===s.EntitiesOnly):return s.EntitiesOnly;default:return s.None}}function v(e,t){return N([e],t)}function L(e,t,i){if(!(t.id in i.entities))return!1;let o=i.entities[t.id],d=Object.assign({},o,t.changes),f=O(d,r);return delete i.entities[t.id],e.push(d),f!==t.id}function N(e,t){let i=[],o=e.filter(d=>L(i,d,t)).length>0;if(i.length===0)return s.None;{let d=t.ids,f=[];return t.ids=t.ids.filter((M,b)=>M in t.entities?!0:(f.push(b),!1)),n(i,t),!o&&f.every(M=>t.ids[M]===d[M])?s.EntitiesOnly:s.Both}}function F(e,t){let i=t.ids.reduce((o,d)=>{let f=e(t.entities[d]);return f!==t.entities[d]&&o.push({id:d,changes:f}),o},[]);return N(i,t)}function T({map:e,id:t},i){let o=i.entities[t];if(!o)return s.None;let d=e(o);return v({id:t,changes:d},i)}function I(e,t){return c([e],t)}function c(e,t){let i=[],o=[];for(let M of e){let b=O(M,r);b in t.entities?o.push({id:b,changes:M}):i.push(M)}let d=N(o,t),f=p(i,t);switch(!0){case(f===s.None&&d===s.None):return s.None;case(f===s.Both||d===s.Both):return s.Both;default:return s.EntitiesOnly}}function n(e,t){e.sort(u);let i=[],o=0,d=0;for(;o<e.length&&d<t.ids.length;){let f=e[o],M=O(f,r),b=t.ids[d],J=t.entities[b];u(f,J)<=0?(i.push(M),o++):(i.push(b),d++)}o<e.length?t.ids=i.concat(e.slice(o).map(r)):t.ids=i.concat(t.ids.slice(d)),e.forEach((f,M)=>{t.entities[r(f)]=f})}return{removeOne:l,removeMany:y,removeAll:h,addOne:a(m),updateOne:a(v),upsertOne:a(I),setAll:a(A),setOne:a(B),setMany:a(w),addMany:a(p),updateMany:a(N),upsertMany:a(c),map:a(F),mapOne:a(T)}}function G(r={}){let{selectId:u,sortComparer:l}={selectId:r.selectId??(p=>p.id),sortComparer:r.sortComparer??!1},y=X(),h=Z(),m=l?_(u,l):z(u);return S(S(S({selectId:u,sortComparer:l},y),h),m)}var $="lists",g=G(),P=g.getInitialState();function D(r){let u=r.ids;return u.length?Math.max(...u)+1:1}var tt=C(P,x(R,(r,{name:u})=>{let l=D(r);return g.addOne({id:l,name:u,topicIds:[]},r)}),x(V,(r,{id:u,name:l,topicIds:y=[],excludeFromAll:h=!1})=>g.addOne({id:u,name:l,topicIds:y,excludeFromAll:h},r)),x(W,(r,{id:u,changes:l})=>g.updateOne({id:u,changes:l},r)),x(Y,(r,{id:u})=>g.removeOne(u,r)),x(q,r=>g.removeAll(r))),et=U({name:$,reducer:tt}),{name:lt,reducer:at,selectListsState:H}=et,{selectAll:ft,selectEntities:yt,selectIds:pt,selectTotal:ht}=g.getSelectors();var j=g.getSelectors(H),gt=j.selectAll,bt=j.selectEntities,Et=j.selectTotal;export{G as a,P as b,at as c,gt as d};
